version: 1
zone_id: sunken_library
zone_name: "Sunken Library"

area_id: A01
level_band: [6, 9]
target_rooms: 110

anchor:
  x: 12
  y: 7

# Global cartesian bounds for planning and validation only.
bounds:
  min:
    x: 12
    y: 6
  max:
    x: 16
    y: 10

clusters:
  - id: CL_LIB_ANTECHAMBER
    rooms: 10
  - id: CL_LIB_STACKS
    rooms: 40
  - id: CL_LIB_FLOODED_WINGS
    rooms: 30
  - id: CL_LIB_DECODER_CHAMBER
    rooms: 30

portals:
  - id: P_LIB_RUSTWOOD
    cluster: CL_LIB_ANTECHAMBER
  - id: P_LIB_FACTORY
    cluster: CL_LIB_DECODER_CHAMBER
  - id: P_LIB_RESERVOIR
    cluster: CL_LIB_DECODER_CHAMBER

protoadventures:
  - q5-sunken-index
  - side-library-misfiled-wing

hubs:
  - HUB_LIB_ANTECHAMBER

cluster_edges:
  - a: CL_LIB_ANTECHAMBER
    b: CL_LIB_STACKS
    kind: spine
  - a: CL_LIB_STACKS
    b: CL_LIB_FLOODED_WINGS
    kind: branch
  - a: CL_LIB_STACKS
    b: CL_LIB_DECODER_CHAMBER
    kind: gate
    gate: q.q5_sunken_index.plates>=4

key_rooms:
  - id: R_LIB_ANTE_01
    cluster: CL_LIB_ANTECHAMBER
    proto: q5-sunken-index
    tags: [HUB_LIB_ANTECHAMBER, portal.P_LIB_RUSTWOOD]
  - id: R_LIB_STACKS_01
    cluster: CL_LIB_STACKS
    proto: q5-sunken-index
  - id: R_LIB_PLATE_01
    cluster: CL_LIB_STACKS
    proto: q5-sunken-index
    tags: [setpiece.q5.plate_shrine_1]
  - id: R_LIB_PLATE_02
    cluster: CL_LIB_STACKS
    proto: q5-sunken-index
    tags: [setpiece.q5.plate_shrine_2]
  - id: R_LIB_PLATE_03
    cluster: CL_LIB_STACKS
    proto: q5-sunken-index
    tags: [setpiece.q5.plate_shrine_3]
  - id: R_LIB_PLATE_04
    cluster: CL_LIB_STACKS
    proto: q5-sunken-index
    tags: [setpiece.q5.plate_shrine_4]
  - id: R_LIB_DECODER_01
    cluster: CL_LIB_DECODER_CHAMBER
    proto: q5-sunken-index
    tags: [setpiece.q5.decoder_chamber, portal.P_LIB_FACTORY, portal.P_LIB_RESERVOIR]
  - id: R_LIB_SAFE_01
    cluster: CL_LIB_FLOODED_WINGS
    proto: side-library-misfiled-wing
    tags: [safe_pocket]
notes:
  - "Decoder chamber is the main gate fork: factory vs reservoir."
