<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light" />
    <title>slopmud web client</title>
    <meta name="description" content="web client for slopmud" />
    <link rel="icon" href="data:," />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg">
      <div class="bg__grain"></div>
      <div class="bg__bubbles">
        <div class="bubble b1"></div>
        <div class="bubble b2"></div>
        <div class="bubble b3"></div>
      </div>
    </div>

    <header class="top">
      <div class="top__inner">
        <a class="brand" href="/">
          <span class="brand__sig">slopmud</span>
          <span class="brand__sub">web client</span>
        </a>
        <nav class="nav">
          <a href="/">home</a>
          <a href="/compliance.html">compliance</a>
        </nav>
      </div>
    </header>

    <main class="wrap">
      <section class="termwrap">
        <div class="termbar">
          <div class="termbar__left">
            <span class="pill" id="status-pill">disconnected</span>
            <span class="muted" id="status-detail"></span>
          </div>

          <div class="termbar__right">
            <button
              id="btn-menu"
              class="iconbtn"
              type="button"
              aria-label="menu"
              aria-haspopup="menu"
              aria-expanded="false"
              aria-controls="menudd"
            >
              <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                <path
                  fill="currentColor"
                  d="M4 6.5h16v2H4v-2zm0 7h16v2H4v-2zm0-3.5h16v2H4v-2z"
                />
              </svg>
            </button>

            <div class="menudd" id="menudd" role="menu" aria-label="menu" hidden>
              <button id="menu-connect" class="menuitem" type="button" role="menuitem">
                connect...
              </button>
              <button id="menu-online" class="menuitem" type="button" role="menuitem">
                online...
              </button>
              <button id="menu-account" class="menuitem" type="button" role="menuitem">
                account...
              </button>
              <button id="menu-sso" class="menuitem" type="button" role="menuitem">
                sso...
              </button>
              <button id="menu-settings" class="menuitem" type="button" role="menuitem">
                settings...
              </button>

              <div class="menudd__sep" role="separator"></div>

              <button id="menu-clear" class="menuitem" type="button" role="menuitem">
                clear terminal
              </button>
              <button id="menu-new-session" class="menuitem" type="button" role="menuitem">
                new session
              </button>

              <div class="menudd__sep" role="separator"></div>

              <a class="menuitem" href="/" role="menuitem">home</a>
              <a class="menuitem" href="/compliance.html" role="menuitem">compliance</a>
            </div>
          </div>
        </div>

        <dialog class="dlg dlg--narrow dlg--gate" id="dlg-auth-gate">
          <form method="dialog" class="dlg__inner">
            <div class="dlg__head">
              <div class="dlg__title">sign in</div>
              <button class="iconbtn" value="close" aria-label="close">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                  <path
                    fill="currentColor"
                    d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3 1.4 1.4z"
                  />
                </svg>
              </button>
            </div>

            <div class="dlg__body">
              <div class="dlg__section">
                <p class="muted" style="margin: 0 0 12px">
                  choose your auth method. we won't connect the terminal until you do.
                </p>

                <div class="gategrid">
                  <button id="btn-gate-password" class="gatecard" type="button">
                    <div class="gatecard__title">password</div>
                    <div class="gatecard__sub">rockin like its 1992</div>
                  </button>

                  <button id="btn-gate-slopsso" class="gatecard" type="button" disabled>
                    <div class="gatecard__title">slopsso</div>
                    <div class="gatecard__sub">custom oidc (dev)</div>
                  </button>

                  <button id="btn-gate-google" class="gatecard" type="button" disabled>
                    <div class="gatecard__title">google</div>
                    <div class="gatecard__sub">oauth</div>
                  </button>
                </div>

                <p class="muted tiny" style="margin: 12px 0 0">
                  this is just a UI choice; you can still change your mind in the connect dialog.
                </p>
              </div>
            </div>
          </form>
        </dialog>

        <dialog class="dlg dlg--narrow" id="dlg-connect">
          <form method="dialog" class="dlg__inner">
            <div class="dlg__head">
              <div class="dlg__title">connect</div>
              <button class="iconbtn" value="close" aria-label="close">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                  <path
                    fill="currentColor"
                    d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3 1.4 1.4z"
                  />
                </svg>
              </button>
            </div>

            <div class="dlg__body">
              <div class="dlg__section">
                <div class="dlg__sectiontitle">auth</div>

                <label class="stack">
                  <span class="muted">character name</span>
                  <input id="auth-name" class="in" autocomplete="username" placeholder="name" />
                </label>

                <div class="dlg__sectiontitle" style="margin-top: 12px">password</div>
                <label class="stack">
                  <span class="muted">password</span>
                  <input
                    id="auth-password"
                    class="in"
                    type="password"
                    autocomplete="current-password"
                    placeholder="password"
                  />
                </label>
                <div class="dlg__row">
                  <button id="btn-auth-login-password" class="btn2" type="button">login</button>
                  <button id="btn-auth-create-password" class="btn2 btn2--primary" type="button">
                    create
                  </button>
                </div>

                <div class="dlg__sectiontitle" style="margin-top: 12px">sso</div>
                <p class="muted tiny" id="sso-status" style="margin: 0 0 10px">loading...</p>
                <div class="dlg__row">
                  <button id="btn-oauth-google" class="btn2" type="button" disabled>
                    sign in with google
                  </button>
                  <button id="btn-oauth-oidc" class="btn2" type="button" disabled>
                    sign in with slopsso
                  </button>
                  <button id="btn-oauth-logout" class="btn2" type="button" disabled>sign out</button>
                </div>
                <div class="dlg__row">
                  <button id="btn-auth-login-sso" class="btn2" type="button" disabled>login</button>
                  <button id="btn-auth-create-sso" class="btn2 btn2--primary" type="button" disabled>
                    create
                  </button>
                </div>
              </div>

              <div class="dlg__section">
                <div class="dlg__sectiontitle">connection</div>
                <label class="stack">
                  <span class="muted">websocket url</span>
                  <input id="ws-url" class="in in--url" autocomplete="off" />
                </label>
                <div class="dlg__row">
                  <button id="btn-connect" class="btn2 btn2--primary" type="button">connect</button>
                  <button id="btn-disconnect" class="btn2" type="button" disabled>disconnect</button>
                </div>
                <div class="dlg__row">
                  <button id="btn-new-session" class="btn2" type="button">new session (change account)</button>
                </div>
                <p class="muted tiny" style="margin: 0">
                  Clears the saved resume token so you can pick a different account name after a refresh.
                </p>
              </div>
            </div>
          </form>
        </dialog>

        <dialog class="dlg dlg--narrow" id="dlg-online">
          <form method="dialog" class="dlg__inner">
            <div class="dlg__head">
              <div class="dlg__title">online</div>
              <button class="iconbtn" value="close" aria-label="close">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                  <path
                    fill="currentColor"
                    d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3 1.4 1.4z"
                  />
                </svg>
              </button>
            </div>
            <div class="dlg__body">
              <div class="dlg__section">
                <p class="muted tiny" id="online-meta" style="margin: 0 0 10px">
                  loading...
                </p>
                <div class="online__grid online__grid--compact">
                  <div class="online__col">
                    <div class="online__hdr">
                      humans
                      <span class="online__count" id="online-humans-count"></span>
                    </div>
                    <ul class="online__list" id="online-humans"></ul>
                  </div>
                  <div class="online__col">
                    <div class="online__hdr">
                      bots
                      <span class="online__count" id="online-bots-count"></span>
                    </div>
                    <ul class="online__list" id="online-bots"></ul>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </dialog>

        <dialog class="dlg dlg--narrow" id="dlg-account">
          <form method="dialog" class="dlg__inner">
            <div class="dlg__head">
              <div class="dlg__title">account</div>
              <button class="iconbtn" value="close" aria-label="close">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                  <path
                    fill="currentColor"
                    d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3 1.4 1.4z"
                  />
                </svg>
              </button>
            </div>
            <div class="dlg__body">
              <div class="dlg__section">
                <p class="muted tiny" style="margin: 0">
                  Email is stored server-side for this character account. Use the buttons below
                  (they send in-game commands).
                </p>
                <label class="stack">
                  <span class="muted">email</span>
                  <input id="acct-email" class="in" autocomplete="email" placeholder="you@example.com" />
                </label>
                <div class="dlg__row">
                  <button id="btn-email-show" class="btn2" type="button">show</button>
                  <button id="btn-email-set" class="btn2 btn2--primary" type="button">set</button>
                  <button id="btn-email-clear" class="btn2" type="button">clear</button>
                </div>
              </div>
            </div>
          </form>
        </dialog>

        <dialog class="dlg dlg--narrow" id="dlg-sso">
          <form method="dialog" class="dlg__inner">
            <div class="dlg__head">
              <div class="dlg__title">sso</div>
              <button class="iconbtn" value="close" aria-label="close">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                  <path
                    fill="currentColor"
                    d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3 1.4 1.4z"
                  />
                </svg>
              </button>
            </div>
            <div class="dlg__body">
              <div class="dlg__section">
                <p class="muted tiny" style="margin: 0 0 10px">
                  If the server prints an auth URL (Google), it will appear here.
                </p>
                <a
                  id="sso-url"
                  class="muted tiny"
                  href="#"
                  target="_blank"
                  rel="noreferrer noopener"
                  style="display: block; word-break: break-all; margin: 0 0 10px"
                  >none</a
                >
                <div class="dlg__row">
                  <button id="btn-sso-open" class="btn2 btn2--primary" type="button" disabled>
                    open
                  </button>
                  <button id="btn-sso-google" class="btn2" type="button">send google</button>
                  <button id="btn-sso-check" class="btn2" type="button">send check</button>
                </div>
              </div>
            </div>
          </form>
        </dialog>

        <dialog class="dlg dlg--narrow" id="dlg-settings">
          <form method="dialog" class="dlg__inner">
            <div class="dlg__head">
              <div class="dlg__title">settings</div>
              <button class="iconbtn" value="close" aria-label="close">
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                  <path
                    fill="currentColor"
                    d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3 1.4 1.4z"
                  />
                </svg>
              </button>
            </div>
            <div class="dlg__body">
              <div class="dlg__section">
                <div class="dlg__sectiontitle">behavior</div>
                <label class="inline">
                  <input id="opt-scroll" type="checkbox" checked />
                  <span class="muted">autoscroll</span>
                </label>
              </div>
            </div>
          </form>
        </dialog>

        <div class="term" id="term" aria-label="terminal output"></div>

        <div class="inputbar">
          <input
            id="line"
            class="in in--line"
            placeholder="type here, press Enter"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
          />

          <div class="toggles">
            <button id="btn-clear" class="btn2" type="button">clear</button>
          </div>
        </div>

        <p class="muted tiny">
          Tips: Ctrl+L clears; Ctrl+C sends ^C. This page connects to a WebSocket
          server that forwards bytes to the session TCP port.
        </p>
      </section>
    </main>

    <script src="./play.js" defer></script>
    <script src="./script.js" defer></script>
  </body>
</html>
